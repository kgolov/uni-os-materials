# 3. Обработка на текст

## 1. Сортирайте /etc/passwd лексикографски по поле UserID.
    sort -t ':' -k 3 /etc/passwd

## 2. Сортирайте /etc/passwd числово по поле UserID. (Открийте разликите с лексикографската сортировка)
    sort -t ':' -k 3 -n /etc/passwd

## 3. Изведете само 1-ва и 5-та колона на файла /etc/passwd спрямо разделител ":".
    cut -d ':' -f 1,5  /etc/passwd

## 4. Изведете съдържанието на файла /etc/passwd от 2-ри до 6-ти символ.
    head -c6 /etc/passwd | tail -c5

## 5. Намерете броя на символите в /etc/passwd. А колко реда има в /etc/passwd?
    wc -m /etc/passwd
    wc -l /etc/passwd

## 6. Извадете от файл /etc/passwd:
### 6.1. първите 12 реда
    head -n 12 /etc/passwd
### 6.2. първите 26 символа
    head -c 26 /etc/passwd
### 6.3. всички редове, освен последните 4
    head -n -4 /etc/passwd
### 6.4. последните 17 реда
    tail -n 17 /etc/passwd
### 6.5. 13-я ред (или друг произволен, ако нямате достатъчно редове)
    sed -n '13p' /etc/passwd
### 6.6. последните 4 символа от 13-ти ред
    sed -n '13p' /etc/passwd | tail -c4

## 7. Отпечатайте потребителските имена и техните home директории от /etc/passwd.
    cut -d ':' -f1,6 /etc/passwd | tr ':' ' '

## 8. Отпечатайте втората колона на /etc/passwd, разделена спрямо символ '/'.
    cut -d '/' -f2 /etc/passwd

## 9. Запаметете във файл в своята home директория резултатът от командата ls -l изпълнена за вашата home директорията. Сортирайте създадения файла по второ поле (numeric, alphabetically).
    sort -k 2 -n output.txt -o output.txt

## 10. Отпечатайте 2 реда над вашия ред в /etc/passwd и 3 реда под него // може да стане и без пайпове
    egrep $(whoami) -A 3 -B 2 /etc/passwd

## 11. Колко хора не се казват Ivan според /etc/passwd
    egrep -v -c '\<Ivan\>' passwd.txt

## 12. Изведете имената на хората с второ име по-дълго от 7 (>7) символа според /etc/passwd
    cut -d ':' -f 5 passwd.txt | cut -d ' ' -f 2 | tr -d ',' | egrep '.{7,}'

## 13. Изведете имената на хората с второ име по-късо от 8 (<=7) символа според /etc/passwd // !(>7) = ?
    cut -d ':' -f 5 passwd.txt | cut -d ' ' -f 2 | tr -d ',' | egrep -v '.{7,}'

## 14. Изведете целите редове от /etc/passwd за хората от 03-a-5003
```
egrep '^[^:]*:[^:]*:[^:]*:[^:]*:[[:alnum:]]* +[[:alnum:]]{,7}[,:]+' passwd.txt
```

## 15. Намерете факултетния си номер във файлa /etc/passwd.
    egrep -i 'kiril golov' passwd.txt | cut -d ':' -f 1 | tail -c +2

## 16. Запазете само потребителските имена от /etc/passwd във файл users във вашата home директория.

## 17. Колко коментара има във файла /etc/services ? Коментарите се маркират със символа #, след който всеки символ на реда се счита за коментар.
```
egrep -c '^[^#]*#+' /etc/services
```

## 18. Вижте man 5 services. Напишете команда, която ви дава името на протокол с порт естествено число N. Командата да не отпечатва нищо, ако търсения порт не съществува (например при порт 1337). Примерно, ако номера на порта N е 69, командата трябва да отпечати tftp.
```
egrep '^[[:alnum:]]*[[:space:]]+69/' /etc/services | cut -f 1 | sort | uniq
egrep '^[[:alnum:]]*[[:space:]]+27374/' /etc/services | cut -f 1 | sort | uniq
```

## 19. Колко файлове в /bin са shell script? (Колко файлове в дадена директория са ASCII text?)
```
file /bin/* | egrep -c 'shell script'
file /bin/* | egrep -c 'ASCII text'
```

## 20. Направете списък с директориите на вашата файлова система, до които нямате достъп. Понеже файловата система може да е много голяма, търсете до 3 нива на дълбочина. А до кои директории имате достъп? Колко на брой са директориите, до които нямате достъп?
```
find / -maxdepth 3 -type d 2>&1 | egrep 'Permission denied' | cut -d ':' -f 2 | cut -c5- | sed 's/.$//'
find / -maxdepth 3 -type d 2>&1 | egrep -v 'Permission denied'
find / -maxdepth 3 -type d 2>&1 | egrep -c 'Permission denied'
```

## 21. Създайте следната файлова йерархия.

**/home/s...../dir1/file1
/home/s...../dir1/file2
/home/s...../dir1/file3**

Посредством vi въведете следното съдържание:
**file1:**```
1
2
3```

**file2:**```
s
a
d
f```

**file3:**```
3
2
1
45
42
14
1
52```

## 22. Във file2 подменете всички малки букви с главни.
```
sed -i 's/[a-z]/\U&/g' file2
```

## 23. Във file3 изтрийте всички "1"-ци.
```
sed -i 's/1//g' file3
```

## 24. Изведете статистика за най-често срещаните символи в трите файла.
```
grep -o . file1 file2 file3  | cut -d ':' -f 2 | sort | uniq -c | sort -k 1 -n -r | head -n 1 | tr -s ' ' | cut -d ' ' -f 3
```

## 25. Направете нов файл с име по ваш избор, който е конкатенация от file{1,2,3}. Забележка: съществува решение с едно извикване на определена програма - опитайте да решите задачата чрез него.
    cat file1 file2 file3 > file

## 26. Прочетете текстов файл file1 и направете всички главни букви малки като запишете резултата във file2.
    tr 'A-Z' 'a-z' < file1 > file2

## 27. Изтрийте всички срещания на буквата 'a' (lower case) в /etc/passwd и намерете броят на оставащите символи.
    tr -d 'a' < passwd.txt | wc -m

## 28. Намерете броя на уникалните символи, използвани в имената на потребителите от /etc/passwd.
```
cut -d ':' -f 1 passwd.txt | egrep -o . | sort | uniq -c | egrep '^[[:space:]]*1 +' | tr -s ' ' | cut -d ' ' -f 3
```

## 29. Отпечатайте всички редове на файла /etc/passwd, които не съдържат символния низ 'ov'.
    egrep -v -c 'ov' passwd.txt

## 30. Отпечатайте последната цифра на UID на всички редове между 28-ми и 46-ред в /etc/passwd.
    head -n 46 passwd.txt | tail -n +28 | cut -d ':' -f 3 | rev | cut -c1

## 31. Отпечатайте правата (permissions) и имената на всички файлове, до които имате read достъп, намиращи се в директорията /tmp.
    find /tmp -type f -readable 2> /dev/null
